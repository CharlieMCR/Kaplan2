"undefined"==typeof Kaplan&&(Kaplan={}),console.log('  .oooooo.   oooo                           oooo   o8o                                                 \n d8P\'  `Y8b  `888                           `888   `"\'                                                 \n888           888 .oo.    .oooo.   oooo d8b  888  oooo   .ooooo.  ooo. .oo.  .oo.    .ooooo.  oooo d8b \n888           888P"Y88b  `P  )88b  `888""8P  888  `888  d88\' `88b `888P"Y88bP"Y88b  d88\' `"Y8 `888""8P \n888           888   888   .oP"888   888      888   888  888ooo888  888   888   888  888        888     \n`88b    ooo   888   888  d8(  888   888      888   888  888    .o  888   888   888  888   .o8  888     \n `Y8bood8P\'  o888o o888o `Y888""8o d888b    o888o o888o `Y8bod8P\' o888o o888o o888o `Y8bod8P\' d888b    \n'),console.log("Created by Charliemcr http://charliemcr.com"),Kaplan={init:function(){Kaplan.nav(),Kaplan.closeMenu(),Kaplan.contactSubmit(),Kaplan.overlayEvents(),Kaplan.bodyHeight(),Kaplan.scrollLogo()},foo:function(){console.log("foo")},toggleNav:function(){jQuery("#site-wrapper").hasClass("show-nav")?jQuery("#site-wrapper").removeClass("show-nav"):jQuery("#site-wrapper").addClass("show-nav")},nav:function(){jQuery(".toggle-nav").click(function(){Kaplan.toggleNav()}),jQuery(".exit-off-canvas").click(function(){Kaplan.toggleNav()})},closeMenu:function(){function e(){window.innerWidth>767&&jQuery("#site-wrapper").hasClass("show-nav")&&jQuery("#site-wrapper").removeClass("show-nav")}e(),jQuery(window).on("resize",function(){e()})},convertHtmlToText:function(e){var n=e,a=""+n;return a=a.replace(/<br>/gi,"\n"),a=a.replace(/<br\s\/>/gi,"\n"),a=a.replace(/<br\/>/gi,"\n"),a=a.replace(/<p.*>/gi,"\n"),a=a.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi," $2 ($1)"),a=a.replace(/<script.*>[\w\W]{1,}(.*?)[\w\W]{1,}<\/script>/gi,""),a=a.replace(/<style.*>[\w\W]{1,}(.*?)[\w\W]{1,}<\/style>/gi,""),a=a.replace(/<(?:.|\s)*?>/g,""),a=a.replace(/(?:(?:\r\n|\r|\n)\s*){2,}/gim,"\n\n"),a=a.replace(/ +(?= )/g,""),a=a.replace(/&nbsp;/gi," "),a=a.replace(/&amp;/gi,"&"),a=a.replace(/&quot;/gi,'"'),a=a.replace(/&lt;/gi,"<"),a=a.replace(/&gt;/gi,">")},ajaxSubmit:function(){var e=jQuery,n=e("#contactForm"),a={},o=/^[a-zA-Z0-9 ]{2,30}$/,t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,r=/^(?=.*[A-Z0-9])[\w.,!?"'\/$ ]+$/i,i=Kaplan.convertHtmlToText(e("input#name",n).val()),l=Kaplan.convertHtmlToText(e("input#email",n).val()),s=Kaplan.convertHtmlToText(e("input#subject",n).val()),c=Kaplan.convertHtmlToText(e("textarea#message",n).val()),u=e("input#token",n).val();if(e(".error").hide(),""===i)return e("label#name_error",n).show(),e("input#name",n).focus(),!1;if(!o.test(i))return e("label#name_error",n).append(". Please use alphanumeric characters").show(),e("input#name",n).focus(),!1;if(""===l)return e("label#email_error",n).show(),e("input#email",n).focus(),!1;if(!t.test(l))return e("label#email_error",n).html("").append("Please use alpha").show(),e("input#email",n).focus(),!1;if(""===s)s="No Subject";else if(!r.test(s))return console.log("foo"),e("label#subject_error",n).append(". Please use alphanumeric characters").show(),e("input#subject",n).focus(),!1;return""===c?(e("label#message_error").show(),e("textarea#message",n).focus(),!1):(a={token:u,name:i,email:l,subject:s,message:c},e.ajax({url:cmcr_url.template_url+"/contact.php",type:"post",data:e.param(a),success:function(a){var o=e.parseJSON(a);o.success?(e(".message").append("<p>"+o.message+"</p>"),e(".message").fadeIn(500,function(){setTimeout(function(){Kaplan.closeOverlay(),e("input#name",n).val(""),e("input#email",n).val(""),e("input#subject",n).val(""),e("textarea#message",n).val("")},3500)})):e(".message").append("<p>"+o.message+"</p>")}}),void 0)},contactSubmit:function(){jQuery("#contactForm").submit(function(e){e.preventDefault(),Kaplan.ajaxSubmit()})},setOverlayHeight:function(){var e=jQuery("#overlay");e.css({height:jQuery("#site-wrapper").height()+"px"})},openOverlay:function(){var e=jQuery("#overlay");e.addClass("show"),Kaplan.setOverlayHeight()},closeOverlay:function(){var e=jQuery("#overlay");e.removeClass("show"),e.css({height:"0px"})},overlayEvents:function(){jQuery("#js-mailto").click(function(e){e.preventDefault(),jQuery("html, body").animate({scrollTop:0},300),Kaplan.openOverlay(),jQuery(document).keydown(function(e){27===e.keyCode&&Kaplan.closeOverlay()})}),jQuery(".exit-form").click(function(e){e.preventDefault(),Kaplan.closeOverlay()}),jQuery("#overlay").click(function(e){"overlay"===e.target.id&&Kaplan.closeOverlay()})},getWindowWidth:function(){return window.innerWidth},getWindowHeight:function(){return window.innerHeight},getWrapperWidth:function(){return jQuery("#js-width").width()},bodyHeight:function(){function e(){jQuery("#site-canvas").css({"min-height":Kaplan.getWindowHeight()})}e(),jQuery(window).resize(function(){e()})},scrollLogo:function(){jQuery(window).scroll(function(){var e=jQuery(document).scrollTop(),n=jQuery(".logo");e>120?n.addClass("logo-small"):0===e&&n.removeClass("logo-small")})},SetSlider:function(){function e(){var e=(Kaplan.getWrapperWidth()-imageWidth)/2-32;l.find(".carousel").width(Kaplan.getWrapperWidth()*imageLength),l.find(".carousel").css({"margin-left":-Kaplan.getWrapperWidth()*c+"px"}),l.find(".js-image").width(Kaplan.getWrapperWidth()),e>-32?(leftSlider.css("margin-left",e+"px"),u.css("margin-right",e+"px")):(leftSlider.css("margin-left","-32px"),u.css("margin-right","-32px"))}function n(e){e.addClass("slide-control-active"),window.setTimeout(function(){e.removeClass("slide-control-active")},500)}function a(){l.find("#js-list-count li").removeClass("active"),l.find("#js-list-count li").eq(c).addClass("active")}function o(){c++,imageLength>c?(l.find(".carousel").animate({"margin-left":-Kaplan.getWrapperWidth()*c+"px"},500,"swing"),n(u),a()):(l.find(".carousel").animate({"margin-left":"0px"},500,"swing"),n(leftSlider),c=0)}function t(){c--,c>=0?(l.find(".carousel").animate({"margin-left":-Kaplan.getWrapperWidth()*c+"px"},500,"swing"),n(leftSlider),a()):c=0}function r(e){d=e.touches[0].clientX,f=e.touches[0].clientY}function i(e){if(jQuery(".carousel-container").has(e.target).length>0){if(!d||!f)return;var n=e.touches[0].clientX,a=e.touches[0].clientY,r=d-n,i=f-a;Math.abs(r)>Math.abs(i)&&(r>0?o():t()),d=null,f=null}}var l=jQuery(".carousel-container"),s=l.find("img"),c=0,u=l.find("#js-slide-right");leftSlider=l.find("#js-slide-left");for(var p=0;p<s.length;p++)l.find("#js-list-count").append('<li><a class="js-count" id="list-item-'+p+'"><span></span></a></li>'),s.eq(p).attr("src",s.eq(p).attr("data-src"));e(),jQuery(window).resize(function(){e()}),u.click(function(e){e.preventDefault(),o()}),leftSlider.click(function(e){e.preventDefault(),t()}),jQuery(document).keydown(function(e){37===e.keyCode?t():39===e.keyCode&&o()}),jQuery(".js-count").click(function(e){e.preventDefault(),k=jQuery(this).parent().index(),k>c?n(u):c>k&&n(leftSlider),c=k,l.find(".carousel").animate({"margin-left":-Kaplan.getWrapperWidth()*c+"px"},500,"swing"),a()}),document.addEventListener("touchstart",r,!1),document.addEventListener("touchmove",i,!1);var d=null,f=null}},function(e){e(document).ready(function(){Kaplan.init()})}(jQuery);